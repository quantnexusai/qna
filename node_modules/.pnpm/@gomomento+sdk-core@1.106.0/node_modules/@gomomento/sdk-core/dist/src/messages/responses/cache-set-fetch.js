"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.Error = exports.Miss = exports.Hit = void 0;
const response_base_1 = require("./response-base");
const utils_1 = require("../../internal/utils");
const enums_1 = require("./enums");
const TEXT_DECODER = new TextDecoder();
/**
 * Indicates that the requested data was successfully retrieved from the cache.  Provides
 * `value*` accessors to retrieve the data in the appropriate format.
 */
class Hit extends response_base_1.ResponseBase {
    constructor(elements) {
        super();
        this.type = enums_1.CacheSetFetchResponse.Hit;
        this.elements = elements;
    }
    /**
     * Returns the data as a Set whose values are utf-8 strings, decoded from the underlying byte arrays.  This
     * is a convenience alias for {valueSetString}.
     * @returns {Set<string>}
     */
    valueSet() {
        return this.valueSetString();
    }
    /**
     * Returns the data as a Set whose values are utf-8 strings, decoded from the underlying byte arrays.
     * @returns {Set<string>}
     */
    valueSetString() {
        return new Set(this.elements.map(e => TEXT_DECODER.decode(e)));
    }
    /**
     * Returns the data as a Set whose values are byte arrays.
     * @returns {Set<Uint8Array>}
     */
    valueSetUint8Array() {
        return new Set(this.elements);
    }
    /**
     * Returns the data as an Array whose values are utf-8 strings, decoded from the underlying byte arrays.
     * This accessor is provided because Arrays are sometimes easier to work with in TypeScript/JavaScript than Sets are.
     * This is a convenience alias for {valueArrayString}.
     * @returns {string[]}
     */
    value() {
        return this.valueArrayString();
    }
    /**
     * Returns the data as an Array whose values are utf-8 strings, decoded from the underlying byte arrays.
     * This accessor is provided because Arrays are sometimes easier to work with in TypeScript/JavaScript than Sets are.
     * This is a convenience alias for {valueArrayString}.
     * @returns {string[]}
     */
    valueArray() {
        return this.valueArrayString();
    }
    /**
     * Returns the data as an Array whose values are utf-8 strings, decoded from the underlying byte arrays.
     * This accessor is provided because Arrays are sometimes easier to work with in TypeScript/JavaScript than Sets are.
     * @returns {string[]}
     */
    valueArrayString() {
        return this.elements.map(e => TEXT_DECODER.decode(e));
    }
    /**
     * Returns the data as an Array whose values are byte arrays.
     * This accessor is provided because Arrays are sometimes easier to work with in TypeScript/JavaScript than Sets are.
     * @returns {Uint8Array[]}
     */
    valueArrayUint8Array() {
        return this.elements;
    }
    toString() {
        const truncatedStringArray = (0, utils_1.truncateStringArray)(Array.from(this.valueSetString()));
        return `${super.toString()}: [${truncatedStringArray.toString()}]`;
    }
}
exports.Hit = Hit;
/**
 * Indicates that the requested data was not available in the cache.
 */
class Miss extends response_base_1.BaseResponseMiss {
    constructor() {
        super(...arguments);
        this.type = enums_1.CacheSetFetchResponse.Miss;
    }
    value() {
        return undefined;
    }
}
exports.Miss = Miss;
/**
 * Indicates that an error occurred during the set fetch request.
 *
 * This response object includes the following fields that you can use to determine
 * how you would like to handle the error:
 *
 * - `errorCode()` - a unique Momento error code indicating the type of error that occurred.
 * - `message()` - a human-readable description of the error
 * - `innerException()` - the original error that caused the failure; can be re-thrown.
 */
class Error extends response_base_1.BaseResponseError {
    constructor(_innerException) {
        super(_innerException);
        this.type = enums_1.CacheSetFetchResponse.Error;
    }
    value() {
        return undefined;
    }
}
exports.Error = Error;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2FjaGUtc2V0LWZldGNoLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vc3JjL21lc3NhZ2VzL3Jlc3BvbnNlcy9jYWNoZS1zZXQtZmV0Y2gudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBQUEsbURBSXlCO0FBRXpCLGdEQUF5RDtBQUN6RCxtQ0FBOEM7QUFFOUMsTUFBTSxZQUFZLEdBQUcsSUFBSSxXQUFXLEVBQUUsQ0FBQztBQU92Qzs7O0dBR0c7QUFDSCxNQUFhLEdBQUksU0FBUSw0QkFBWTtJQUluQyxZQUFZLFFBQXNCO1FBQ2hDLEtBQUssRUFBRSxDQUFDO1FBSEQsU0FBSSxHQUE4Qiw2QkFBcUIsQ0FBQyxHQUFHLENBQUM7UUFJbkUsSUFBSSxDQUFDLFFBQVEsR0FBRyxRQUFRLENBQUM7SUFDM0IsQ0FBQztJQUVEOzs7O09BSUc7SUFDSSxRQUFRO1FBQ2IsT0FBTyxJQUFJLENBQUMsY0FBYyxFQUFFLENBQUM7SUFDL0IsQ0FBQztJQUVEOzs7T0FHRztJQUNJLGNBQWM7UUFDbkIsT0FBTyxJQUFJLEdBQUcsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLFlBQVksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ2pFLENBQUM7SUFFRDs7O09BR0c7SUFDSSxrQkFBa0I7UUFDdkIsT0FBTyxJQUFJLEdBQUcsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7SUFDaEMsQ0FBQztJQUVEOzs7OztPQUtHO0lBQ0ksS0FBSztRQUNWLE9BQU8sSUFBSSxDQUFDLGdCQUFnQixFQUFFLENBQUM7SUFDakMsQ0FBQztJQUVEOzs7OztPQUtHO0lBQ0ksVUFBVTtRQUNmLE9BQU8sSUFBSSxDQUFDLGdCQUFnQixFQUFFLENBQUM7SUFDakMsQ0FBQztJQUVEOzs7O09BSUc7SUFDSSxnQkFBZ0I7UUFDckIsT0FBTyxJQUFJLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLFlBQVksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUN4RCxDQUFDO0lBRUQ7Ozs7T0FJRztJQUNJLG9CQUFvQjtRQUN6QixPQUFPLElBQUksQ0FBQyxRQUFRLENBQUM7SUFDdkIsQ0FBQztJQUVlLFFBQVE7UUFDdEIsTUFBTSxvQkFBb0IsR0FBRyxJQUFBLDJCQUFtQixFQUM5QyxLQUFLLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxjQUFjLEVBQUUsQ0FBQyxDQUNsQyxDQUFDO1FBQ0YsT0FBTyxHQUFHLEtBQUssQ0FBQyxRQUFRLEVBQUUsTUFBTSxvQkFBb0IsQ0FBQyxRQUFRLEVBQUUsR0FBRyxDQUFDO0lBQ3JFLENBQUM7Q0FDRjtBQTlFRCxrQkE4RUM7QUFFRDs7R0FFRztBQUNILE1BQWEsSUFBSyxTQUFRLGdDQUFnQjtJQUExQzs7UUFDVyxTQUFJLEdBQStCLDZCQUFxQixDQUFDLElBQUksQ0FBQztJQUl6RSxDQUFDO0lBSFEsS0FBSztRQUNWLE9BQU8sU0FBUyxDQUFDO0lBQ25CLENBQUM7Q0FDRjtBQUxELG9CQUtDO0FBRUQ7Ozs7Ozs7OztHQVNHO0FBQ0gsTUFBYSxLQUFNLFNBQVEsaUNBQWlCO0lBQzFDLFlBQVksZUFBeUI7UUFDbkMsS0FBSyxDQUFDLGVBQWUsQ0FBQyxDQUFDO1FBR2hCLFNBQUksR0FBZ0MsNkJBQXFCLENBQUMsS0FBSyxDQUFDO0lBRnpFLENBQUM7SUFHTSxLQUFLO1FBQ1YsT0FBTyxTQUFTLENBQUM7SUFDbkIsQ0FBQztDQUNGO0FBVEQsc0JBU0MiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBSZXNwb25zZUJhc2UsXG4gIEJhc2VSZXNwb25zZU1pc3MsXG4gIEJhc2VSZXNwb25zZUVycm9yLFxufSBmcm9tICcuL3Jlc3BvbnNlLWJhc2UnO1xuaW1wb3J0IHtTZGtFcnJvcn0gZnJvbSAnLi4vLi4vZXJyb3JzJztcbmltcG9ydCB7dHJ1bmNhdGVTdHJpbmdBcnJheX0gZnJvbSAnLi4vLi4vaW50ZXJuYWwvdXRpbHMnO1xuaW1wb3J0IHtDYWNoZVNldEZldGNoUmVzcG9uc2V9IGZyb20gJy4vZW51bXMnO1xuXG5jb25zdCBURVhUX0RFQ09ERVIgPSBuZXcgVGV4dERlY29kZXIoKTtcblxuaW50ZXJmYWNlIElSZXNwb25zZSB7XG4gIHZhbHVlKCk6IHN0cmluZ1tdIHwgdW5kZWZpbmVkO1xuICByZWFkb25seSB0eXBlOiBDYWNoZVNldEZldGNoUmVzcG9uc2U7XG59XG5cbi8qKlxuICogSW5kaWNhdGVzIHRoYXQgdGhlIHJlcXVlc3RlZCBkYXRhIHdhcyBzdWNjZXNzZnVsbHkgcmV0cmlldmVkIGZyb20gdGhlIGNhY2hlLiAgUHJvdmlkZXNcbiAqIGB2YWx1ZSpgIGFjY2Vzc29ycyB0byByZXRyaWV2ZSB0aGUgZGF0YSBpbiB0aGUgYXBwcm9wcmlhdGUgZm9ybWF0LlxuICovXG5leHBvcnQgY2xhc3MgSGl0IGV4dGVuZHMgUmVzcG9uc2VCYXNlIGltcGxlbWVudHMgSVJlc3BvbnNlIHtcbiAgcHJpdmF0ZSByZWFkb25seSBlbGVtZW50czogVWludDhBcnJheVtdO1xuICByZWFkb25seSB0eXBlOiBDYWNoZVNldEZldGNoUmVzcG9uc2UuSGl0ID0gQ2FjaGVTZXRGZXRjaFJlc3BvbnNlLkhpdDtcblxuICBjb25zdHJ1Y3RvcihlbGVtZW50czogVWludDhBcnJheVtdKSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLmVsZW1lbnRzID0gZWxlbWVudHM7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgZGF0YSBhcyBhIFNldCB3aG9zZSB2YWx1ZXMgYXJlIHV0Zi04IHN0cmluZ3MsIGRlY29kZWQgZnJvbSB0aGUgdW5kZXJseWluZyBieXRlIGFycmF5cy4gIFRoaXNcbiAgICogaXMgYSBjb252ZW5pZW5jZSBhbGlhcyBmb3Ige3ZhbHVlU2V0U3RyaW5nfS5cbiAgICogQHJldHVybnMge1NldDxzdHJpbmc+fVxuICAgKi9cbiAgcHVibGljIHZhbHVlU2V0KCk6IFNldDxzdHJpbmc+IHtcbiAgICByZXR1cm4gdGhpcy52YWx1ZVNldFN0cmluZygpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGRhdGEgYXMgYSBTZXQgd2hvc2UgdmFsdWVzIGFyZSB1dGYtOCBzdHJpbmdzLCBkZWNvZGVkIGZyb20gdGhlIHVuZGVybHlpbmcgYnl0ZSBhcnJheXMuXG4gICAqIEByZXR1cm5zIHtTZXQ8c3RyaW5nPn1cbiAgICovXG4gIHB1YmxpYyB2YWx1ZVNldFN0cmluZygpOiBTZXQ8c3RyaW5nPiB7XG4gICAgcmV0dXJuIG5ldyBTZXQodGhpcy5lbGVtZW50cy5tYXAoZSA9PiBURVhUX0RFQ09ERVIuZGVjb2RlKGUpKSk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgZGF0YSBhcyBhIFNldCB3aG9zZSB2YWx1ZXMgYXJlIGJ5dGUgYXJyYXlzLlxuICAgKiBAcmV0dXJucyB7U2V0PFVpbnQ4QXJyYXk+fVxuICAgKi9cbiAgcHVibGljIHZhbHVlU2V0VWludDhBcnJheSgpOiBTZXQ8VWludDhBcnJheT4ge1xuICAgIHJldHVybiBuZXcgU2V0KHRoaXMuZWxlbWVudHMpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGRhdGEgYXMgYW4gQXJyYXkgd2hvc2UgdmFsdWVzIGFyZSB1dGYtOCBzdHJpbmdzLCBkZWNvZGVkIGZyb20gdGhlIHVuZGVybHlpbmcgYnl0ZSBhcnJheXMuXG4gICAqIFRoaXMgYWNjZXNzb3IgaXMgcHJvdmlkZWQgYmVjYXVzZSBBcnJheXMgYXJlIHNvbWV0aW1lcyBlYXNpZXIgdG8gd29yayB3aXRoIGluIFR5cGVTY3JpcHQvSmF2YVNjcmlwdCB0aGFuIFNldHMgYXJlLlxuICAgKiBUaGlzIGlzIGEgY29udmVuaWVuY2UgYWxpYXMgZm9yIHt2YWx1ZUFycmF5U3RyaW5nfS5cbiAgICogQHJldHVybnMge3N0cmluZ1tdfVxuICAgKi9cbiAgcHVibGljIHZhbHVlKCk6IHN0cmluZ1tdIHtcbiAgICByZXR1cm4gdGhpcy52YWx1ZUFycmF5U3RyaW5nKCk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgZGF0YSBhcyBhbiBBcnJheSB3aG9zZSB2YWx1ZXMgYXJlIHV0Zi04IHN0cmluZ3MsIGRlY29kZWQgZnJvbSB0aGUgdW5kZXJseWluZyBieXRlIGFycmF5cy5cbiAgICogVGhpcyBhY2Nlc3NvciBpcyBwcm92aWRlZCBiZWNhdXNlIEFycmF5cyBhcmUgc29tZXRpbWVzIGVhc2llciB0byB3b3JrIHdpdGggaW4gVHlwZVNjcmlwdC9KYXZhU2NyaXB0IHRoYW4gU2V0cyBhcmUuXG4gICAqIFRoaXMgaXMgYSBjb252ZW5pZW5jZSBhbGlhcyBmb3Ige3ZhbHVlQXJyYXlTdHJpbmd9LlxuICAgKiBAcmV0dXJucyB7c3RyaW5nW119XG4gICAqL1xuICBwdWJsaWMgdmFsdWVBcnJheSgpOiBzdHJpbmdbXSB7XG4gICAgcmV0dXJuIHRoaXMudmFsdWVBcnJheVN0cmluZygpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGRhdGEgYXMgYW4gQXJyYXkgd2hvc2UgdmFsdWVzIGFyZSB1dGYtOCBzdHJpbmdzLCBkZWNvZGVkIGZyb20gdGhlIHVuZGVybHlpbmcgYnl0ZSBhcnJheXMuXG4gICAqIFRoaXMgYWNjZXNzb3IgaXMgcHJvdmlkZWQgYmVjYXVzZSBBcnJheXMgYXJlIHNvbWV0aW1lcyBlYXNpZXIgdG8gd29yayB3aXRoIGluIFR5cGVTY3JpcHQvSmF2YVNjcmlwdCB0aGFuIFNldHMgYXJlLlxuICAgKiBAcmV0dXJucyB7c3RyaW5nW119XG4gICAqL1xuICBwdWJsaWMgdmFsdWVBcnJheVN0cmluZygpOiBzdHJpbmdbXSB7XG4gICAgcmV0dXJuIHRoaXMuZWxlbWVudHMubWFwKGUgPT4gVEVYVF9ERUNPREVSLmRlY29kZShlKSk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgZGF0YSBhcyBhbiBBcnJheSB3aG9zZSB2YWx1ZXMgYXJlIGJ5dGUgYXJyYXlzLlxuICAgKiBUaGlzIGFjY2Vzc29yIGlzIHByb3ZpZGVkIGJlY2F1c2UgQXJyYXlzIGFyZSBzb21ldGltZXMgZWFzaWVyIHRvIHdvcmsgd2l0aCBpbiBUeXBlU2NyaXB0L0phdmFTY3JpcHQgdGhhbiBTZXRzIGFyZS5cbiAgICogQHJldHVybnMge1VpbnQ4QXJyYXlbXX1cbiAgICovXG4gIHB1YmxpYyB2YWx1ZUFycmF5VWludDhBcnJheSgpOiBVaW50OEFycmF5W10ge1xuICAgIHJldHVybiB0aGlzLmVsZW1lbnRzO1xuICB9XG5cbiAgcHVibGljIG92ZXJyaWRlIHRvU3RyaW5nKCk6IHN0cmluZyB7XG4gICAgY29uc3QgdHJ1bmNhdGVkU3RyaW5nQXJyYXkgPSB0cnVuY2F0ZVN0cmluZ0FycmF5KFxuICAgICAgQXJyYXkuZnJvbSh0aGlzLnZhbHVlU2V0U3RyaW5nKCkpXG4gICAgKTtcbiAgICByZXR1cm4gYCR7c3VwZXIudG9TdHJpbmcoKX06IFske3RydW5jYXRlZFN0cmluZ0FycmF5LnRvU3RyaW5nKCl9XWA7XG4gIH1cbn1cblxuLyoqXG4gKiBJbmRpY2F0ZXMgdGhhdCB0aGUgcmVxdWVzdGVkIGRhdGEgd2FzIG5vdCBhdmFpbGFibGUgaW4gdGhlIGNhY2hlLlxuICovXG5leHBvcnQgY2xhc3MgTWlzcyBleHRlbmRzIEJhc2VSZXNwb25zZU1pc3Mge1xuICByZWFkb25seSB0eXBlOiBDYWNoZVNldEZldGNoUmVzcG9uc2UuTWlzcyA9IENhY2hlU2V0RmV0Y2hSZXNwb25zZS5NaXNzO1xuICBwdWJsaWMgdmFsdWUoKTogdW5kZWZpbmVkIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG59XG5cbi8qKlxuICogSW5kaWNhdGVzIHRoYXQgYW4gZXJyb3Igb2NjdXJyZWQgZHVyaW5nIHRoZSBzZXQgZmV0Y2ggcmVxdWVzdC5cbiAqXG4gKiBUaGlzIHJlc3BvbnNlIG9iamVjdCBpbmNsdWRlcyB0aGUgZm9sbG93aW5nIGZpZWxkcyB0aGF0IHlvdSBjYW4gdXNlIHRvIGRldGVybWluZVxuICogaG93IHlvdSB3b3VsZCBsaWtlIHRvIGhhbmRsZSB0aGUgZXJyb3I6XG4gKlxuICogLSBgZXJyb3JDb2RlKClgIC0gYSB1bmlxdWUgTW9tZW50byBlcnJvciBjb2RlIGluZGljYXRpbmcgdGhlIHR5cGUgb2YgZXJyb3IgdGhhdCBvY2N1cnJlZC5cbiAqIC0gYG1lc3NhZ2UoKWAgLSBhIGh1bWFuLXJlYWRhYmxlIGRlc2NyaXB0aW9uIG9mIHRoZSBlcnJvclxuICogLSBgaW5uZXJFeGNlcHRpb24oKWAgLSB0aGUgb3JpZ2luYWwgZXJyb3IgdGhhdCBjYXVzZWQgdGhlIGZhaWx1cmU7IGNhbiBiZSByZS10aHJvd24uXG4gKi9cbmV4cG9ydCBjbGFzcyBFcnJvciBleHRlbmRzIEJhc2VSZXNwb25zZUVycm9yIGltcGxlbWVudHMgSVJlc3BvbnNlIHtcbiAgY29uc3RydWN0b3IoX2lubmVyRXhjZXB0aW9uOiBTZGtFcnJvcikge1xuICAgIHN1cGVyKF9pbm5lckV4Y2VwdGlvbik7XG4gIH1cblxuICByZWFkb25seSB0eXBlOiBDYWNoZVNldEZldGNoUmVzcG9uc2UuRXJyb3IgPSBDYWNoZVNldEZldGNoUmVzcG9uc2UuRXJyb3I7XG4gIHB1YmxpYyB2YWx1ZSgpOiB1bmRlZmluZWQge1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cbn1cblxuZXhwb3J0IHR5cGUgUmVzcG9uc2UgPSBIaXQgfCBNaXNzIHwgRXJyb3I7XG4iXX0=