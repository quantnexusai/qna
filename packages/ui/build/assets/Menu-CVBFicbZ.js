import{r as u,l as N,ap as q,bY as B,ay as A,au as J,j as _,am as Q,_ as R,e as X,f as Z,s as j,ar as ee,k as te,a as se,bo as H,m as oe,n as re}from"./index-ChaGAcYI.js";import{P as ne,a as ae}from"./Popover-DmQCuS9U.js";const ie=["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"];function K(t,e,o){return t===e?t.firstChild:e&&e.nextElementSibling?e.nextElementSibling:o?null:t.firstChild}function z(t,e,o){return t===e?o?t.firstChild:t.lastChild:e&&e.previousElementSibling?e.previousElementSibling:o?null:t.lastChild}function U(t,e){if(e===void 0)return!0;let o=t.innerText;return o===void 0&&(o=t.textContent),o=o.trim().toLowerCase(),o.length===0?!1:e.repeating?o[0]===e.keys[0]:o.indexOf(e.keys.join(""))===0}function C(t,e,o,M,m,g){let c=!1,i=m(t,e,e?o:!1);for(;i;){if(i===t.firstChild){if(c)return!1;c=!0}const h=M?!1:i.disabled||i.getAttribute("aria-disabled")==="true";if(!i.hasAttribute("tabindex")||!U(i,g)||h)i=m(t,i,o);else return i.focus(),!0}return!1}const le=u.forwardRef(function(e,o){const{actions:M,autoFocus:m=!1,autoFocusItem:g=!1,children:c,className:i,disabledItemsFocusable:h=!1,disableListWrap:y=!1,onKeyDown:b,variant:v="selectedMenu"}=e,I=N(e,ie),p=u.useRef(null),L=u.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});q(()=>{m&&p.current.focus()},[m]),u.useImperativeHandle(M,()=>({adjustStyleForScrollbar:(s,r)=>{const l=!p.current.style.width;if(s.clientHeight<p.current.clientHeight&&l){const f=`${B(A(s))}px`;p.current.style[r.direction==="rtl"?"paddingLeft":"paddingRight"]=f,p.current.style.width=`calc(100% + ${f})`}return p.current}}),[]);const F=s=>{const r=p.current,l=s.key,f=A(r).activeElement;if(l==="ArrowDown")s.preventDefault(),C(r,f,y,h,K);else if(l==="ArrowUp")s.preventDefault(),C(r,f,y,h,z);else if(l==="Home")s.preventDefault(),C(r,null,y,h,K);else if(l==="End")s.preventDefault(),C(r,null,y,h,z);else if(l.length===1){const n=L.current,P=l.toLowerCase(),x=performance.now();n.keys.length>0&&(x-n.lastTime>500?(n.keys=[],n.repeating=!0,n.previousKeyMatched=!0):n.repeating&&P!==n.keys[0]&&(n.repeating=!1)),n.lastTime=x,n.keys.push(P);const T=f&&!n.repeating&&U(f,n);n.previousKeyMatched&&(T||C(r,f,!1,h,K,n))?s.preventDefault():n.previousKeyMatched=!1}b&&b(s)},w=J(p,o);let a=-1;u.Children.forEach(c,(s,r)=>{if(!u.isValidElement(s)){a===r&&(a+=1,a>=c.length&&(a=-1));return}s.props.disabled||(v==="selectedMenu"&&s.props.selected||a===-1)&&(a=r),a===r&&(s.props.disabled||s.props.muiSkipListHighlight||s.type.muiSkipListHighlight)&&(a+=1,a>=c.length&&(a=-1))});const S=u.Children.map(c,(s,r)=>{if(r===a){const l={};return g&&(l.autoFocus=!0),s.props.tabIndex===void 0&&v==="selectedMenu"&&(l.tabIndex=0),u.cloneElement(s,l)}return s});return _.jsx(Q,R({role:"menu",ref:w,className:i,onKeyDown:F,tabIndex:m?0:-1},I,{children:S}))});function ue(t){return Z("MuiMenu",t)}X("MuiMenu",["root","paper","list"]);const ce=["onEntering"],pe=["autoFocus","children","className","disableAutoFocusItem","MenuListProps","onClose","open","PaperProps","PopoverClasses","transitionDuration","TransitionProps","variant","slots","slotProps"],fe={vertical:"top",horizontal:"right"},de={vertical:"top",horizontal:"left"},me=t=>{const{classes:e}=t;return re({root:["root"],paper:["paper"],list:["list"]},ue,e)},he=j(ne,{shouldForwardProp:t=>ee(t)||t==="classes",name:"MuiMenu",slot:"Root",overridesResolver:(t,e)=>e.root})({}),ge=j(ae,{name:"MuiMenu",slot:"Paper",overridesResolver:(t,e)=>e.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),ye=j(le,{name:"MuiMenu",slot:"List",overridesResolver:(t,e)=>e.list})({outline:0}),be=u.forwardRef(function(e,o){var M,m;const g=te({props:e,name:"MuiMenu"}),{autoFocus:c=!0,children:i,className:h,disableAutoFocusItem:y=!1,MenuListProps:b={},onClose:v,open:I,PaperProps:p={},PopoverClasses:L,transitionDuration:F="auto",TransitionProps:{onEntering:w}={},variant:a="selectedMenu",slots:S={},slotProps:s={}}=g,r=N(g.TransitionProps,ce),l=N(g,pe),f=se(),n=f.direction==="rtl",P=R({},g,{autoFocus:c,disableAutoFocusItem:y,MenuListProps:b,onEntering:w,PaperProps:p,transitionDuration:F,TransitionProps:r,variant:a}),x=me(P),T=c&&!y&&I,k=u.useRef(null),$=(d,D)=>{k.current&&k.current.adjustStyleForScrollbar(d,f),w&&w(d,D)},W=d=>{d.key==="Tab"&&(d.preventDefault(),v&&v(d,"tabKeyDown"))};let E=-1;u.Children.map(i,(d,D)=>{u.isValidElement(d)&&(d.props.disabled||(a==="selectedMenu"&&d.props.selected||E===-1)&&(E=D))});const O=(M=S.paper)!=null?M:ge,G=(m=s.paper)!=null?m:p,V=H({elementType:S.root,externalSlotProps:s.root,ownerState:P,className:[x.root,h]}),Y=H({elementType:O,externalSlotProps:G,ownerState:P,className:x.paper});return _.jsx(he,R({onClose:v,anchorOrigin:{vertical:"bottom",horizontal:n?"right":"left"},transformOrigin:n?fe:de,slots:{paper:O,root:S.root},slotProps:{root:V,paper:Y},open:I,ref:o,transitionDuration:F,TransitionProps:R({onEntering:$},r),ownerState:P},l,{classes:L,children:_.jsx(ye,R({onKeyDown:W,actions:k,autoFocus:c&&(E===-1||y),autoFocusItem:T,variant:a},b,{className:oe(x.list,b.className),children:i}))}))});export{be as M,le as a};
