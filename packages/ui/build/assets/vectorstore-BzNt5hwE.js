import{a3 as g,P as o,x as f,R as v,r as j,z as D,H as p,j as e,D as b,q as C,t as S,T as u,a9 as R,aa as k,v as A,w as l,A as T,aE as i}from"./index-ChaGAcYI.js";import{R as E}from"./main-ByC2YqwJ.js";import{S as n}from"./StatsCard-Bz-yfMnY.js";/**
 * @license @tabler/icons-react v3.29.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var I=g("outline","zoom-scan","IconZoomScan",[["path",{d:"M4 8v-2a2 2 0 0 1 2 -2h2",key:"svg-0"}],["path",{d:"M4 16v2a2 2 0 0 0 2 2h2",key:"svg-1"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v2",key:"svg-2"}],["path",{d:"M16 20h2a2 2 0 0 0 2 -2v-2",key:"svg-3"}],["path",{d:"M8 11a3 3 0 1 0 6 0a3 3 0 0 0 -6 0",key:"svg-4"}],["path",{d:"M16 16l-2.5 -2.5",key:"svg-5"}]]);const W=({show:s,dialogProps:t,onCancel:d,onGoToRetrievalQuery:m})=>{const h=document.getElementById("portal"),a=f(),c=v(r=>r.customization);j.useEffect(()=>(a(s?{type:D}:{type:p}),()=>a({type:p})),[s,a]);const x=s?e.jsxs(b,{onClose:d,open:s,fullWidth:!0,maxWidth:"sm","aria-labelledby":"upsert-result-dialog-title","aria-describedby":"upsert-result-dialog-description",children:[e.jsx(C,{sx:{fontSize:"1rem"},id:"upsert-result-dialog-title",children:"Upsert Record"}),e.jsx(S,{children:e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, minmax(0, 1fr))",gap:5},children:[e.jsx(n,{title:"Added",stat:t.numAdded??0}),e.jsx(n,{title:"Updated",stat:t.numUpdated??0}),e.jsx(n,{title:"Skipped",stat:t.numSkipped??0}),e.jsx(n,{title:"Deleted",stat:t.numDeleted??0})]}),t.addedDocs&&t.addedDocs.length>0&&e.jsxs(u,{sx:{mt:2,mb:2,fontWeight:500},children:[t.numAdded," Added Documents"]}),t.addedDocs&&t.addedDocs.length>0&&t.addedDocs.map((r,y)=>e.jsx(R,{sx:{border:"1px solid #e0e0e0",borderRadius:`${c.borderRadius}px`,mb:1},children:e.jsxs(k,{children:[e.jsx(u,{sx:{fontSize:14},color:"text.primary",gutterBottom:!0,children:r.pageContent}),e.jsx(E,{theme:c.isDarkMode?"ocean":"rjv-default",style:{padding:10,borderRadius:10},src:r.metadata,name:null,quotesOnKeys:!1,enableClipboard:!1,displayDataTypes:!1,collapsed:!0})]})},y))]})}),e.jsxs(A,{children:[t.goToRetrievalQuery&&e.jsxs("div",{style:{display:"flex",flexDirection:"column",width:"100%",marginLeft:"15px",marginRight:"15px"},children:[e.jsx(l,{variant:"contained",fullWidth:!0,sx:{borderRadius:2,height:"100%",backgroundImage:"linear-gradient(to right, #3f5efb, #fc466b)","&:hover":{backgroundImage:"linear-gradient(to right, #2b4efb, #fe2752)"},mb:2},startIcon:e.jsx(I,{}),onClick:m,children:"Test Retrieval"}),e.jsx(l,{fullWidth:!0,onClick:d,children:"Close"})]}),!t.goToRetrievalQuery&&e.jsx(l,{onClick:d,children:"Close"})]})]}):null;return T.createPortal(x,h)};W.propTypes={show:o.bool,dialogProps:o.object,onCancel:o.func,onGoToRetrievalQuery:o.func};const O="/assets/upsert_history_empty-5Jk5WmmS.svg",H=(s,t)=>i.post(`/vector/internal-upsert/${s}`,t),M=(s,t)=>i.post(`/vector/internal-upsert/${s}`,t,{headers:{"Content-Type":"multipart/form-data"}}),U=(s,t={})=>i.get(`/upsert-history/${s}`,{params:{order:"DESC",...t}}),z=s=>i.patch("/upsert-history",{ids:s}),$={getUpsertHistory:U,upsertVectorStore:H,upsertVectorStoreWithFormData:M,deleteUpsertHistory:z};export{O as H,W as U,$ as v};
