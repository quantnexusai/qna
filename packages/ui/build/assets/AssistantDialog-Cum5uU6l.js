import{P as C,j as e,D as pe,q as he,t as me,w as d,A as ue,x as Je,y as He,b as ie,r as n,bz as ut,z as Ue,H as re,B as w,S as D,T as A,v as Ge,I as c,ah as ft,K as Re,L as Ke,R as xt,aT as gt,a9 as We,aa as ze,C as jt}from"./index-YrBb95ol.js";import{S as Q}from"./StyledButton-DXZyQiwo.js";import{a as G}from"./TooltipWithParser-DKPjkixU.js";import{D as Xe}from"./Dropdown-B8fdFRp4.js";import{M as yt}from"./MultiDropdown-wxNqtYoC.js";import{C as vt}from"./CredentialInputHandler-BzNGMmJx.js";import{F as qe}from"./File-DPjeuW7d.js";import{B as Ye}from"./BackdropLoader-CslNJVg7.js";import{C as bt}from"./ConfirmDialog-KE28Mtnw.js";import{S as _t}from"./CredentialListDialog-IIU7ZM0n.js";import{a as k}from"./assistants-Wx-_qNk1.js";import{O as R}from"./OutlinedInput-BhZIIZoj.js";import{v as ae}from"./v4-D8aEg3BZ.js";import{I as Le}from"./IconSearch-D-OoqJyQ.js";import{I as St}from"./IconPlus-BaXmZWfM.js";const Qe=({show:T,dialogProps:i,onCancel:M,onDelete:O,onDeleteBoth:Z})=>{const F=document.getElementById("portal"),N=T?e.jsxs(pe,{fullWidth:!0,maxWidth:"xs",open:T,onClose:M,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[e.jsx(he,{sx:{fontSize:"1rem"},id:"alert-dialog-title",children:i.title}),e.jsxs(me,{children:[e.jsx("span",{children:i.description}),e.jsxs("div",{style:{display:"flex",flexDirection:"row",marginTop:20},children:[e.jsx(d,{sx:{flex:1,mb:1,mr:1},color:"error",variant:"outlined",onClick:O,children:"Only Flowise"}),e.jsx(Q,{sx:{flex:1,mb:1,ml:1},color:"error",variant:"contained",onClick:Z,children:"OpenAI and Flowise"})]})]})]}):null;return ue.createPortal(N,F)};Qe.propTypes={show:C.bool,dialogProps:C.object,onDeleteBoth:C.func,onDelete:C.func,onCancel:C.func};const Ze=({show:T,dialogProps:i,onCancel:M,onConfirm:O,onDelete:Z,setError:F})=>{const N=document.getElementById("portal"),p=Je();He();const h=(...r)=>p(Re(...r)),$=(...r)=>p(Ke(...r)),x=ie(k.getAssistantVectorStore),m=ie(k.listAssistantVectorStore),[I,q]=n.useState(""),[E,L]=n.useState(!1),[B,V]=n.useState(7),[J,K]=n.useState([{label:"- Create New -",name:"-create-"}]),[b,W]=n.useState(""),[z,y]=n.useState(!1);n.useEffect(()=>{x.data&&(x.data.name?q(x.data.name):q(""),x.data.id?W(x.data.id):W(""),x.data.expires_after&&x.data.expires_after.days?(V(x.data.expires_after.days),L(!0)):(V(7),L(!1)))},[x.data]),n.useEffect(()=>{var r,o,f,s;if(m.data){let j=[];for(let S=0;S<m.data.length;S+=1)j.push({label:((r=m.data[S])==null?void 0:r.name)??m.data[S].id,name:m.data[S].id,description:`${(f=(o=m.data[S])==null?void 0:o.file_counts)==null?void 0:f.total} files (${ut((s=m.data[S])==null?void 0:s.usage_bytes)})`});j=j.filter(S=>S.name!=="-create-"),j.unshift({label:"- Create New -",name:"-create-"}),K(j)}},[m.data]),n.useEffect(()=>{x.error&&F&&F(x.error)},[x.error]),n.useEffect(()=>(i.type==="EDIT"&&i.data?(x.request(i.data.id,i.credential),m.request(i.credential)):i.type==="ADD"&&m.request(i.credential),()=>{q(""),L(!1),V(7),W(""),K([{label:"- Create New -",name:"-create-"}]),y(!1)}),[i]),n.useEffect(()=>(p(T?{type:Ue}:{type:re}),()=>p({type:re})),[T,p]);const H=async()=>{y(!0);try{(await k.deleteAssistantVectorStore(b,i.credential)).data&&(h({message:"Vector Store deleted",options:{key:new Date().getTime()+Math.random(),variant:"success",action:o=>e.jsx(d,{style:{color:"white"},onClick:()=>$(o),children:e.jsx(c,{})})}}),Z(b)),y(!1)}catch(r){F&&F(r),h({message:`Failed to delete Vector Store: ${typeof r.response.data=="object"?r.response.data.message:r.response.data}`,options:{key:new Date().getTime()+Math.random(),variant:"error",persist:!0,action:o=>e.jsx(d,{style:{color:"white"},onClick:()=>$(o),children:e.jsx(c,{})})}}),y(!1),M()}},_=async()=>{y(!0);try{const r={name:I!==""?I:null,expires_after:E?{anchor:"last_active_at",days:parseFloat(B)}:null},o=await k.createAssistantVectorStore(i.credential,r);o.data&&(h({message:"New Vector Store added",options:{key:new Date().getTime()+Math.random(),variant:"success",action:f=>e.jsx(d,{style:{color:"white"},onClick:()=>$(f),children:e.jsx(c,{})})}}),O(o.data)),y(!1)}catch(r){F&&F(r),h({message:`Failed to add new Vector Store: ${typeof r.response.data=="object"?r.response.data.message:r.response.data}`,options:{key:new Date().getTime()+Math.random(),variant:"error",persist:!0,action:o=>e.jsx(d,{style:{color:"white"},onClick:()=>$(o),children:e.jsx(c,{})})}}),y(!1),M()}},U=async r=>{y(!0);try{const o={name:I!==""?I:null,expires_after:E?{anchor:"last_active_at",days:parseFloat(B)}:null},f=await k.updateAssistantVectorStore(r,i.credential,o);if(f.data)if(h({message:"Vector Store saved",options:{key:new Date().getTime()+Math.random(),variant:"success",action:s=>e.jsx(d,{style:{color:"white"},onClick:()=>$(s),children:e.jsx(c,{})})}}),"files"in f.data){const s=f.data.files;O(ft.omit(f.data,["files"]),s)}else O(f.data);y(!1)}catch(o){F&&F(o),h({message:`Failed to save Vector Store: ${typeof o.response.data=="object"?o.response.data.message:o.response.data}`,options:{key:new Date().getTime()+Math.random(),variant:"error",persist:!0,action:f=>e.jsx(d,{style:{color:"white"},onClick:()=>$(f),children:e.jsx(c,{})})}}),y(!1),M()}},P=T?e.jsxs(pe,{fullWidth:!0,maxWidth:"sm",open:T,onClose:M,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[e.jsx(he,{sx:{fontSize:"1rem"},id:"alert-dialog-title",children:i.title}),e.jsxs(me,{children:[e.jsxs(w,{sx:{p:2},children:[e.jsx(D,{sx:{position:"relative"},direction:"row",children:e.jsxs(A,{variant:"overline",children:["Select Vector Store",e.jsx("span",{style:{color:"red"},children:" *"})]})}),e.jsx(Xe,{name:b,options:J,loading:m.loading,onSelect:r=>{W(r),r==="-create-"?(q(""),L(!1),V(7)):x.request(r,i.credential)},value:b??"choose an option"})]}),b!==""&&e.jsxs(e.Fragment,{children:[e.jsxs(w,{sx:{p:2},children:[e.jsx(D,{sx:{position:"relative"},direction:"row",children:e.jsx(A,{variant:"overline",children:"Vector Store Name"})}),e.jsx(R,{id:"vsName",type:"string",fullWidth:!0,placeholder:"My Vector Store",value:I,onChange:r=>q(r.target.value)})]}),e.jsxs(w,{sx:{p:2},children:[e.jsx(D,{sx:{position:"relative"},direction:"row",children:e.jsx(A,{variant:"overline",children:"Vector Store Expiration"})}),e.jsx(_t,{onChange:r=>L(r),value:E})]}),E&&e.jsxs(w,{sx:{p:2},children:[e.jsx(D,{sx:{position:"relative"},direction:"row",children:e.jsxs(A,{variant:"overline",children:["Expiration Days",e.jsx("span",{style:{color:"red"},children:" *"})]})}),e.jsx(R,{id:"expDays",type:"number",fullWidth:!0,value:B,onChange:r=>V(r.target.value)})]})]})]}),e.jsxs(Ge,{children:[i.type==="EDIT"&&e.jsx(Q,{color:"error",variant:"contained",onClick:()=>H(),children:"Delete"}),e.jsx(Q,{disabled:!b,variant:"contained",onClick:()=>b==="-create-"?_():U(b),children:i.confirmButtonName})]}),e.jsx(bt,{}),z&&e.jsx(Ye,{open:z})]}):null;return ue.createPortal(P,N)};Ze.propTypes={show:C.bool,dialogProps:C.object,onCancel:C.func,onConfirm:C.func,onDelete:C.func,setError:C.func};const wt=[{label:"gpt-4o-mini",name:"gpt-4o-mini"},{label:"gpt-4o",name:"gpt-4o"},{label:"gpt-4-turbo",name:"gpt-4-turbo"},{label:"gpt-4-turbo-preview",name:"gpt-4-turbo-preview"},{label:"gpt-4-1106-preview",name:"gpt-4-1106-preview"},{label:"gpt-4-0613",name:"gpt-4-0613"},{label:"gpt-4",name:"gpt-4"},{label:"gpt-3.5-turbo",name:"gpt-3.5-turbo"},{label:"gpt-3.5-turbo-0125",name:"gpt-3.5-turbo-0125"},{label:"gpt-3.5-turbo-1106",name:"gpt-3.5-turbo-1106"},{label:"gpt-3.5-turbo-0613",name:"gpt-3.5-turbo-0613"},{label:"gpt-3.5-turbo-16k",name:"gpt-3.5-turbo-16k"},{label:"gpt-3.5-turbo-16k-0613",name:"gpt-3.5-turbo-16k-0613"}],Dt=({show:T,dialogProps:i,onCancel:M,onConfirm:O,setError:Z})=>{var _e,Se,we,De,Ae,Ce,ke,Ie,Te,Fe,Ve,Ne,Ee,Me,Oe,$e,Be;const F=document.getElementById("portal");He();const N=Je(),p=(...t)=>N(Re(...t)),h=(...t)=>N(Ke(...t)),$=xt(t=>t.customization),x=n.useRef(),m=ie(k.getSpecificAssistant),I=ie(k.getAssistantObj),[q,E]=n.useState(""),[L,B]=n.useState(""),[V,J]=n.useState(""),[K,b]=n.useState(""),[W,z]=n.useState(`https://api.dicebear.com/7.x/bottts/svg?seed=${ae()}`),[y,H]=n.useState(""),[_,U]=n.useState(""),[P,r]=n.useState(""),[o,f]=n.useState(["code_interpreter","file_search"]),[s,j]=n.useState({}),[S,X]=n.useState(1),[ee,Y]=n.useState(1),[fe,ne]=n.useState(""),[xe,oe]=n.useState(""),[ge,v]=n.useState(!1),[Pe,le]=n.useState(!1),[et,tt]=n.useState({}),[st,te]=n.useState(!1),[at,je]=n.useState({});n.useEffect(()=>(N(T?{type:Ue}:{type:re}),()=>N({type:re})),[T,N]),n.useEffect(()=>{if(m.data){E(m.data.id),z(m.data.iconSrc),U(m.data.credential);const t=JSON.parse(m.data.details);B(t.id),J(t.name),b(t.description),H(t.model),r(t.instructions),X(t.temperature),Y(t.top_p),f(t.tools??[]),j(t.tool_resources??{})}},[m.data]),n.useEffect(()=>{I.data&&ye(I.data)},[I.data]),n.useEffect(()=>{var t;if(I.error){let a="Internal Server Error",l=I.error;(t=l==null?void 0:l.response)!=null&&t.data&&(a=typeof l.response.data=="object"?l.response.data.message:l.response.data),p({message:`Failed to get assistant: ${a}`,options:{key:new Date().getTime()+Math.random(),variant:"error",persist:!0,action:u=>e.jsx(d,{style:{color:"white"},onClick:()=>h(u),children:e.jsx(c,{})})}})}},[I.error]),n.useEffect(()=>{var t;if(m.error){let a="";(t=error==null?void 0:error.response)!=null&&t.data&&(a=typeof error.response.data=="object"?error.response.data.message:error.response.data),p({message:`Failed to get assistant: ${a}`,options:{key:new Date().getTime()+Math.random(),variant:"error",persist:!0,action:l=>e.jsx(d,{style:{color:"white"},onClick:()=>h(l),children:e.jsx(c,{})})}})}},[m.error]),n.useEffect(()=>{if(i.type==="EDIT"&&i.data){E(i.data.id),z(i.data.iconSrc),U(i.data.credential);const t=JSON.parse(i.data.details);B(t.id),J(t.name),b(t.description),H(t.model),r(t.instructions),X(t.temperature),Y(t.top_p),f(t.tools??[]),j(t.tool_resources??{})}else i.type==="EDIT"&&i.assistantId?m.request(i.assistantId):i.type==="ADD"&&i.selectedOpenAIAssistantId&&i.credential?(E(""),z(`https://api.dicebear.com/7.x/bottts/svg?seed=${ae()}`),U(i.credential),I.request(i.selectedOpenAIAssistantId,i.credential)):i.type==="ADD"&&!i.selectedOpenAIAssistantId&&(E(""),z(`https://api.dicebear.com/7.x/bottts/svg?seed=${ae()}`),U(""),B(""),J(""),b(""),H(""),r(""),X(1),Y(1),f(["code_interpreter","file_search"]),ne(""),oe(""),j({}));return()=>{E(""),z(`https://api.dicebear.com/7.x/bottts/svg?seed=${ae()}`),U(""),B(""),J(""),b(""),H(""),r(""),X(1),Y(1),f(["code_interpreter","file_search"]),ne(""),oe(""),j({}),v(!1)}},[i]);const ye=t=>{B(t.id),J(t.name),b(t.description),H(t.model),r(t.instructions),X(t.temperature),Y(t.top_p),j(t.tool_resources??{});let a=[];if(t.tools&&t.tools.length)for(const l of t.tools)a.push(l.type);f(a)},it=t=>{const a={title:`Edit ${t.name?t.name:t.id}`,type:"EDIT",cancelButtonName:"Cancel",confirmButtonName:"Save",data:t,credential:_};je(a),te(!0)},rt=()=>{je({title:"Add Vector Store",type:"ADD",cancelButtonName:"Cancel",confirmButtonName:"Add",credential:_}),te(!0)},nt=async()=>{v(!0);try{const t={id:L,name:V,description:K,model:y,instructions:P,temperature:S?parseFloat(S):null,top_p:ee?parseFloat(ee):null,tools:o,tool_resources:s},a={details:JSON.stringify(t),iconSrc:W,credential:_,type:"OPENAI"},l=await k.createNewAssistant(a);l.data&&(p({message:"New Assistant added",options:{key:new Date().getTime()+Math.random(),variant:"success",action:u=>e.jsx(d,{style:{color:"white"},onClick:()=>h(u),children:e.jsx(c,{})})}}),O(l.data.id)),v(!1)}catch(t){p({message:`Failed to add new Assistant: ${typeof t.response.data=="object"?t.response.data.message:t.response.data}`,options:{key:new Date().getTime()+Math.random(),variant:"error",persist:!0,action:a=>e.jsx(d,{style:{color:"white"},onClick:()=>h(a),children:e.jsx(c,{})})}}),v(!1)}},ot=async()=>{v(!0);try{const t={name:V,description:K,model:y,instructions:P,temperature:S?parseFloat(S):null,top_p:ee?parseFloat(ee):null,tools:o,tool_resources:s},a={details:JSON.stringify(t),iconSrc:W,credential:_},l=await k.updateAssistant(q,a);l.data&&(p({message:"Assistant saved",options:{key:new Date().getTime()+Math.random(),variant:"success",action:u=>e.jsx(d,{style:{color:"white"},onClick:()=>h(u),children:e.jsx(c,{})})}}),O(l.data.id)),v(!1)}catch(t){p({message:`Failed to save Assistant: ${typeof t.response.data=="object"?t.response.data.message:t.response.data}`,options:{key:new Date().getTime()+Math.random(),variant:"error",persist:!0,action:a=>e.jsx(d,{style:{color:"white"},onClick:()=>h(a),children:e.jsx(c,{})})}}),v(!1)}},lt=async()=>{v(!0);try{const t=await k.getAssistantObj(L,_);t.data&&(ye(t.data),p({message:"Assistant successfully synced!",options:{key:new Date().getTime()+Math.random(),variant:"success",action:a=>e.jsx(d,{style:{color:"white"},onClick:()=>h(a),children:e.jsx(c,{})})}})),v(!1)}catch(t){p({message:`Failed to sync Assistant: ${typeof t.response.data=="object"?t.response.data.message:t.response.data}`,options:{key:new Date().getTime()+Math.random(),variant:"error",persist:!0,action:a=>e.jsx(d,{style:{color:"white"},onClick:()=>h(a),children:e.jsx(c,{})})}}),v(!1)}},ct=async t=>{var a,l;v(!0);try{const u=(l=(a=s.file_search)==null?void 0:a.vector_store_ids)!=null&&l.length?s.file_search.vector_store_ids[0]:"",g=await k.uploadFilesToAssistantVectorStore(u,_,t);if(g.data){p({message:"File uploaded successfully!",options:{key:new Date().getTime()+Math.random(),variant:"success",action:se=>e.jsx(d,{style:{color:"white"},onClick:()=>h(se),children:e.jsx(c,{})})}});const ce=g.data,de=(s==null?void 0:s.file_search.files)??[];j({...s,file_search:{...s==null?void 0:s.file_search,files:[...de,...ce]}})}v(!1)}catch(u){p({message:`Failed to upload file: ${typeof u.response.data=="object"?u.response.data.message:u.response.data}`,options:{key:new Date().getTime()+Math.random(),variant:"error",persist:!0,action:g=>e.jsx(d,{style:{color:"white"},onClick:()=>h(g),children:e.jsx(c,{})})}}),v(!1)}},dt=async t=>{var a,l;v(!0);try{const u=await k.uploadFilesToAssistant(_,t);if(u.data){p({message:"File uploaded successfully!",options:{key:new Date().getTime()+Math.random(),variant:"success",action:se=>e.jsx(d,{style:{color:"white"},onClick:()=>h(se),children:e.jsx(c,{})})}});const g=u.data,ce=((a=s==null?void 0:s.code_interpreter)==null?void 0:a.files)??[],de=((l=s==null?void 0:s.code_interpreter)==null?void 0:l.file_ids)??[];j({...s,code_interpreter:{...s==null?void 0:s.code_interpreter,files:[...ce,...g],file_ids:[...de,...g.map(se=>se.id)]}})}v(!1)}catch(u){p({message:`Failed to upload file: ${typeof u.response.data=="object"?u.response.data.message:u.response.data}`,options:{key:new Date().getTime()+Math.random(),variant:"error",persist:!0,action:g=>e.jsx(d,{style:{color:"white"},onClick:()=>h(g),children:e.jsx(c,{})})}}),v(!1)}},pt=()=>{j({...s,file_search:{files:[],vector_store_object:null,vector_store_ids:[]}})},ht=()=>{tt({title:"Delete Assistant",description:`Select delete method for ${V}`,cancelButtonName:"Cancel"}),le(!0)},ve=async t=>{le(!1);try{(await k.deleteAssistant(q,t)).data&&(p({message:"Assistant deleted",options:{key:new Date().getTime()+Math.random(),variant:"success",action:l=>e.jsx(d,{style:{color:"white"},onClick:()=>h(l),children:e.jsx(c,{})})}}),O())}catch(a){p({message:`Failed to delete Assistant: ${typeof a.response.data=="object"?a.response.data.message:a.response.data}`,options:{key:new Date().getTime()+Math.random(),variant:"error",persist:!0,action:l=>e.jsx(d,{style:{color:"white"},onClick:()=>h(l),children:e.jsx(c,{})})}}),M()}},be=async(t,a)=>{var l,u;if(a==="code_interpreter")j({...s,code_interpreter:{...s.code_interpreter,files:s.code_interpreter.files.filter(g=>g.id!==t),file_ids:s.code_interpreter.file_ids.filter(g=>g!==t)}});else if(a==="file_search"){j({...s,file_search:{...s.file_search,files:s.file_search.files.filter(g=>g.id!==t)}});try{const g=(u=(l=s.file_search)==null?void 0:l.vector_store_ids)!=null&&u.length?s.file_search.vector_store_ids[0]:"";await k.deleteFilesFromAssistantVectorStore(g,_,{file_ids:[t]})}catch(g){console.error(g)}}},mt=T?e.jsxs(pe,{fullWidth:!0,maxWidth:"md",open:T,onClose:M,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[e.jsx(he,{sx:{fontSize:"1rem",p:3,pb:0},id:"alert-dialog-title",children:i.title}),e.jsx(me,{ref:x,sx:{display:"flex",flexDirection:"column",gap:2,maxHeight:"75vh",position:"relative",px:3,pb:3},children:e.jsxs(w,{sx:{display:"flex",flexDirection:"column",gap:2,pt:2},children:[e.jsxs(w,{children:[e.jsx(D,{sx:{position:"relative"},direction:"row",children:e.jsxs(A,{variant:"overline",children:["OpenAI Credential",e.jsx("span",{style:{color:"red"},children:" *"})]})}),e.jsx(vt,{data:_?{credential:_}:{},inputParam:{label:"Connect Credential",name:"credential",type:"credential",credentialNames:["openAIApi"]},onSelect:t=>U(t)},_)]}),e.jsxs(w,{children:[e.jsx(D,{sx:{position:"relative"},direction:"row",children:e.jsxs(A,{variant:"overline",children:["Assistant Model",e.jsx("span",{style:{color:"red"},children:" *"})]})}),e.jsx(Xe,{name:y,options:wt,onSelect:t=>H(t),value:y??"choose an option"},y)]}),e.jsxs(w,{children:[e.jsxs(D,{sx:{position:"relative",alignItems:"center"},direction:"row",children:[e.jsx(A,{variant:"overline",children:"Assistant Name"}),e.jsx(G,{title:"The name of the assistant. The maximum length is 256 characters."})]}),e.jsx(R,{id:"assistantName",type:"string",size:"small",fullWidth:!0,placeholder:"My New Assistant",value:V,name:"assistantName",onChange:t=>J(t.target.value)})]}),e.jsxs(w,{children:[e.jsxs(D,{sx:{position:"relative",alignItems:"center"},direction:"row",children:[e.jsx(A,{variant:"overline",children:"Assistant Description"}),e.jsx(G,{title:"The description of the assistant. The maximum length is 512 characters."})]}),e.jsx(R,{id:"assistantDesc",type:"string",size:"small",fullWidth:!0,placeholder:"Description of what the Assistant does",multiline:!0,rows:3,value:K,name:"assistantDesc",onChange:t=>b(t.target.value)})]}),e.jsxs(w,{children:[e.jsx(D,{sx:{position:"relative"},direction:"row",children:e.jsx(A,{variant:"overline",children:"Assistant Icon Src"})}),e.jsx("div",{style:{width:100,height:100,borderRadius:"50%",backgroundColor:"white"},children:e.jsx("img",{style:{width:"100%",height:"100%",padding:5,borderRadius:"50%",objectFit:"contain"},alt:V,src:W})}),e.jsx(R,{id:"assistantIcon",type:"string",size:"small",fullWidth:!0,placeholder:`https://api.dicebear.com/7.x/bottts/svg?seed=${ae()}`,value:W,name:"assistantIcon",onChange:t=>z(t.target.value)})]}),e.jsxs(w,{children:[e.jsxs(D,{sx:{position:"relative",alignItems:"center"},direction:"row",children:[e.jsx(A,{variant:"overline",children:"Assistant Instruction"}),e.jsx(G,{title:"The system instructions that the assistant uses. The maximum length is 32768 characters."})]}),e.jsx(R,{id:"assistantInstructions",type:"string",size:"small",fullWidth:!0,placeholder:"You are a personal math tutor. When asked a question, write and run Python code to answer the question.",multiline:!0,rows:3,value:P,name:"assistantInstructions",onChange:t=>r(t.target.value)})]}),e.jsxs(w,{children:[e.jsxs(D,{sx:{position:"relative",alignItems:"center"},direction:"row",children:[e.jsx(A,{variant:"overline",children:"Assistant Temperature"}),e.jsx(G,{title:"Controls randomness: Lowering results in less random completions. As the temperature approaches zero, the model will become deterministic and repetitive."})]}),e.jsx(R,{id:"assistantTemp",type:"number",size:"small",fullWidth:!0,value:S,name:"assistantTemp",onChange:t=>X(t.target.value)})]}),e.jsxs(w,{children:[e.jsxs(D,{sx:{position:"relative",alignItems:"center"},direction:"row",children:[e.jsx(A,{variant:"overline",children:"Assistant Top P"}),e.jsx(G,{title:"Controls diversity via nucleus sampling: 0.5 means half of all likelihood-weighted options are considered."})]}),e.jsx(R,{id:"assistantTopP",type:"number",fullWidth:!0,size:"small",value:ee,name:"assistantTopP",min:"0",max:"1",onChange:t=>Y(t.target.value)})]}),_&&e.jsxs(e.Fragment,{children:[e.jsxs(w,{children:[e.jsxs(D,{sx:{position:"relative",alignItems:"center"},direction:"row",children:[e.jsx(A,{variant:"overline",children:"Assistant Tools"}),e.jsx(G,{title:"A list of tool enabled on the assistant. There can be a maximum of 128 tools per assistant."})]}),e.jsx(yt,{name:JSON.stringify(o),options:[{label:"Code Interpreter",name:"code_interpreter"},{label:"File Search",name:"file_search"}],onSelect:t=>{f(t?JSON.parse(t):[]),setTimeout(()=>{var a;(a=x==null?void 0:x.current)==null||a.scrollTo({top:gt})},100)},value:o??"choose an option"},JSON.stringify(o))]}),e.jsxs(w,{children:[(o==null?void 0:o.length)>0&&o.includes("code_interpreter")&&e.jsx(We,{sx:{mb:2,border:"1px solid #e0e0e0",borderRadius:`${$.borderRadius}px`},children:e.jsxs(ze,{children:[e.jsxs(D,{sx:{position:"relative",alignItems:"center"},direction:"row",children:[e.jsx(A,{variant:"overline",children:"Code Interpreter Files"}),e.jsx(G,{title:"Code Interpreter enables the assistant to write and run code. This tool can process files with diverse data and formatting, and generate files such as graphs"})]}),((Se=(_e=s==null?void 0:s.code_interpreter)==null?void 0:_e.files)==null?void 0:Se.length)>0&&e.jsx("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap"},children:(De=(we=s==null?void 0:s.code_interpreter)==null?void 0:we.files)==null?void 0:De.map((t,a)=>e.jsxs("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",width:"max-content",height:"max-content",borderRadius:15,background:"rgb(254,252,191)",paddingLeft:15,paddingRight:15,paddingTop:5,paddingBottom:5,marginRight:10,marginBottom:10},children:[e.jsx("span",{style:{color:"rgb(116,66,16)",marginRight:10},children:t.filename}),e.jsx(Le,{sx:{height:15,width:15,p:0},onClick:()=>be(t.id,"code_interpreter"),children:e.jsx(c,{})})]},a))}),e.jsx(qe,{fileType:"*",formDataUpload:!0,value:fe??"Choose a file to upload",onChange:t=>ne(t),onFormDataChange:t=>dt(t)},fe)]})}),(o==null?void 0:o.length)>0&&o.includes("file_search")&&e.jsx(We,{sx:{mb:2,border:"1px solid #e0e0e0",borderRadius:`${$.borderRadius}px`},children:e.jsxs(ze,{children:[e.jsxs(D,{sx:{position:"relative",alignItems:"center"},direction:"row",children:[e.jsx(A,{variant:"overline",children:"File Search Files"}),e.jsx(G,{title:"File search enables the assistant with knowledge from files that you or your users upload. Once a file is uploaded, the assistant automatically decides when to retrieve content based on user requests"})]}),((Ae=s==null?void 0:s.file_search)==null?void 0:Ae.vector_store_object)&&e.jsx(jt,{label:(ke=(Ce=s==null?void 0:s.file_search)==null?void 0:Ce.vector_store_object)!=null&&ke.name?(Te=(Ie=s==null?void 0:s.file_search)==null?void 0:Ie.vector_store_object)==null?void 0:Te.name:(Ve=(Fe=s==null?void 0:s.file_search)==null?void 0:Fe.vector_store_object)==null?void 0:Ve.id,component:"a",sx:{mb:2,mt:1},variant:"outlined",clickable:!0,color:"primary",onDelete:pt,onClick:()=>{var t;return it((t=s==null?void 0:s.file_search)==null?void 0:t.vector_store_object)}}),((Ee=(Ne=s==null?void 0:s.file_search)==null?void 0:Ne.files)==null?void 0:Ee.length)>0&&e.jsx("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap"},children:(Oe=(Me=s==null?void 0:s.file_search)==null?void 0:Me.files)==null?void 0:Oe.map((t,a)=>e.jsxs("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",width:"max-content",height:"max-content",borderRadius:15,background:"rgb(254,252,191)",paddingLeft:15,paddingRight:15,paddingTop:5,paddingBottom:5,marginRight:10,marginBottom:10},children:[e.jsx("span",{style:{color:"rgb(116,66,16)",marginRight:10},children:t.filename}),e.jsx(Le,{sx:{height:15,width:15,p:0},onClick:()=>be(t.id,"file_search"),children:e.jsx(c,{})})]},a))}),!s.file_search||!((Be=($e=s.file_search)==null?void 0:$e.vector_store_ids)!=null&&Be.length)?e.jsx(d,{variant:"outlined",component:"label",fullWidth:!0,startIcon:e.jsx(St,{}),sx:{marginRight:"1rem"},onClick:()=>rt(),children:"Add Vector Store"}):e.jsx(qe,{fileType:"*",formDataUpload:!0,value:xe??"Choose a file to upload",onChange:t=>oe(t),onFormDataChange:t=>ct(t)},xe)]})})]})]})]})}),e.jsxs(Ge,{sx:{p:3,pt:0},children:[i.type==="EDIT"&&e.jsx(Q,{color:"secondary",variant:"contained",onClick:()=>lt(),children:"Sync"}),i.type==="EDIT"&&e.jsx(Q,{color:"error",variant:"contained",onClick:()=>ht(),children:"Delete"}),e.jsx(Q,{disabled:!(y&&_),variant:"contained",onClick:()=>i.type==="ADD"?nt():ot(),children:i.confirmButtonName})]}),e.jsx(Qe,{show:Pe,dialogProps:et,onCancel:()=>le(!1),onDelete:()=>ve(),onDeleteBoth:()=>ve(!0)}),e.jsx(Ze,{show:st,dialogProps:at,onCancel:()=>te(!1),onDelete:t=>{j({...s,file_search:{vector_store_object:null,files:[],vector_store_ids:s.file_search.vector_store_ids.filter(a=>t!==a)}}),te(!1)},onConfirm:(t,a)=>{var l;j({...s,file_search:{...s.file_search,vector_store_object:t,files:a||((l=s.file_search)==null?void 0:l.files),vector_store_ids:[t.id]}}),te(!1)},setError:Z}),ge&&e.jsx(Ye,{open:ge})]}):null;return ue.createPortal(mt,F)};Dt.propTypes={show:C.bool,dialogProps:C.object,onCancel:C.func,onConfirm:C.func};export{Dt as A};
