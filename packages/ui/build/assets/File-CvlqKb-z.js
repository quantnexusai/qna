import{a3 as U,P as n,a as S,r as N,j as o,ao as $,w as b}from"./index-ChaGAcYI.js";import{F as J}from"./FormControl-BLGDakJE.js";/**
 * @license @tabler/icons-react v3.29.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var M=U("outline","upload","IconUpload",[["path",{d:"M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2",key:"svg-0"}],["path",{d:"M7 9l5 -5l5 5",key:"svg-1"}],["path",{d:"M12 4l0 12",key:"svg-2"}]]);const O=({value:h,formDataUpload:p,fileType:y,onChange:i,onFormDataChange:g,disabled:F=!1})=>{const x=S(),[u,f]=N.useState(h??""),w=async e=>{if(e.target.files){if(e.target.files.length===1){const s=e.target.files[0],{name:a}=s,t=new FileReader;t.onload=l=>{var r;if(!((r=l==null?void 0:l.target)!=null&&r.result))return;const{result:m}=l.target,c=m+`,filename:${a}`;f(c),i(c)},t.readAsDataURL(s)}else if(e.target.files.length>0){let s=Array.from(e.target.files).map(t=>{const l=new FileReader,{name:m}=t;return new Promise(c=>{l.onload=r=>{var d;if(!((d=r==null?void 0:r.target)!=null&&d.result))return;const{result:D}=r.target,R=D+`,filename:${m}`;c(R)},l.readAsDataURL(t)})});const a=await Promise.all(s);f(JSON.stringify(a)),i(JSON.stringify(a))}}},j=async e=>{if(e.target.files){if(e.target.files.length===1){const s=e.target.files[0],{name:a}=s,t=new FormData;t.append("files",s),f(`,filename:${a}`),i(`,filename:${a}`),g(t)}else if(e.target.files.length>0){const s=new FormData,a=[];for(let t=0;t<e.target.files.length;t++)s.append("files",e.target.files[t]),a.push(`,filename:${e.target.files[t].name}`);f(JSON.stringify(a)),i(JSON.stringify(a)),g(s)}}};return o.jsxs(J,{sx:{mt:1,width:"100%"},size:"small",children:[!p&&o.jsx("span",{style:{fontStyle:"italic",color:x.palette.grey[800],marginBottom:"1rem"},children:u?$(u):"Choose a file to upload"}),o.jsxs(b,{disabled:F,variant:"outlined",component:"label",fullWidth:!0,startIcon:o.jsx(M,{}),sx:{marginRight:"1rem"},children:["Upload File",o.jsx("input",{type:"file",multiple:!0,accept:y,hidden:!0,onChange:e=>p?j(e):w(e)})]})]})};O.propTypes={value:n.string,fileType:n.string,formDataUpload:n.bool,onChange:n.func,onFormDataChange:n.func,disabled:n.bool};export{O as F};
