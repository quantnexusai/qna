import{a3 as Y,P as f,a as B,R as P,j as e,x as $,y as G,r as p,z as L,H as k,D as O,q as W,ab as F,t as V,B as v,T as M,v as _,w as m,A as q,I as S,K as H,L as U}from"./index-ChaGAcYI.js";import{S as K}from"./StyledButton-8-5Nm6DU.js";import{C as X}from"./ConfirmDialog-UiX2DWMF.js";import{d as T}from"./documentstore-CAsbbKXX.js";import{O as E}from"./OutlinedInput-CAVpSyYT.js";/**
 * @license @tabler/icons-react v3.29.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var oe=Y("outline","vector-bezier-2","IconVectorBezier2",[["path",{d:"M3 3m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z",key:"svg-0"}],["path",{d:"M17 17m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z",key:"svg-1"}],["path",{d:"M7 5l7 0",key:"svg-2"}],["path",{d:"M10 19l7 0",key:"svg-3"}],["path",{d:"M9 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-4"}],["path",{d:"M15 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-5"}],["path",{d:"M7 5.5a5 6.5 0 0 1 5 6.5a5 6.5 0 0 0 5 6.5",key:"svg-6"}]]);const J=({status:t,isTableView:r})=>{const a=B(),s=P(n=>n.customization),i=n=>{switch(n){case"STALE":return s.isDarkMode?[a.palette.grey[400],a.palette.grey[600],a.palette.grey[800]]:[a.palette.grey[300],a.palette.grey[500],a.palette.grey[700]];case"EMPTY":return s.isDarkMode?["#4a148c","#6a1b9a","#ffffff"]:["#d1c4e9","#9575cd","#673ab7"];case"SYNCING":return s.isDarkMode?["#ff6f00","#ff8f00","#ffffff"]:["#fff8e1","#ffe57f","#ffc107"];case"UPSERTING":return s.isDarkMode?["#01579b","#0277bd","#ffffff"]:["#e1f5fe","#4fc3f7","#0288d1"];case"SYNC":return s.isDarkMode?["#1b5e20","#2e7d32","#ffffff"]:["#e8f5e9","#81c784","#43a047"];case"UPSERTED":return s.isDarkMode?["#004d40","#00695c","#ffffff"]:["#e0f2f1","#4db6ac","#00897b"];case"NEW":return s.isDarkMode?["#0d47a1","#1565c0","#ffffff"]:["#e3f2fd","#64b5f6","#1e88e5"];default:return s.isDarkMode?[a.palette.grey[300],a.palette.grey[500],a.palette.grey[700]]:[a.palette.grey[200],a.palette.grey[400],a.palette.grey[600]]}};return e.jsxs(e.Fragment,{children:[!r&&e.jsxs("div",{style:{display:"flex",flexDirection:"row",alignContent:"center",alignItems:"center",background:t==="EMPTY"?"transparent":i(t)[0],border:t==="EMPTY"?"1px solid":"none",borderColor:t==="EMPTY"?i(t)[0]:"transparent",borderRadius:"25px",paddingTop:"3px",paddingBottom:"3px",paddingLeft:"10px",paddingRight:"10px",width:"fit-content"},children:[e.jsx("div",{style:{width:"10px",height:"10px",borderRadius:"50%",backgroundColor:t==="EMPTY"?"transparent":i(t)[1],border:t==="EMPTY"?"3px solid":"none",borderColor:t==="EMPTY"?i(t)[1]:"transparent"}}),e.jsx("span",{style:{fontSize:"0.7rem",color:i(t)[2],marginLeft:5},children:t})]}),r&&e.jsx("div",{style:{display:"flex",width:"20px",height:"20px",borderRadius:"50%",backgroundColor:t==="EMPTY"?"transparent":i(t)[1],border:t==="EMPTY"?"3px solid":"none",borderColor:t==="EMPTY"?i(t)[1]:"transparent"},title:t})]})};J.propTypes={status:f.string,isTableView:f.bool};const Q=({show:t,dialogProps:r,onCancel:a,onConfirm:s})=>{const i=document.getElementById("portal"),n=$();G();const x=(...o)=>n(H(...o)),u=(...o)=>n(U(...o)),[y,h]=p.useState(""),[j,g]=p.useState(""),[C,w]=p.useState("ADD"),[I,A]=p.useState();p.useEffect(()=>(w(r.type),r.type==="EDIT"&&r.data?(h(r.data.name),g(r.data.description),A(r.data.id)):r.type==="ADD"&&(h(""),g("")),()=>{h(""),g("")}),[r]),p.useEffect(()=>(n(t?{type:L}:{type:k}),()=>n({type:k})),[t,n]);const N=async()=>{var o;try{const c={name:y,description:j},l=await T.createDocumentStore(c);l.data&&(x({message:"New Document Store created.",options:{key:new Date().getTime()+Math.random(),variant:"success",action:d=>e.jsx(m,{style:{color:"white"},onClick:()=>u(d),children:e.jsx(S,{})})}}),s(l.data.id))}catch(c){const l=typeof c=="string"?c:((o=c.response)==null?void 0:o.data)||`${c.response.data.message}`;x({message:`Failed to add new Document Store: ${l}`,options:{key:new Date().getTime()+Math.random(),variant:"error",persist:!0,action:d=>e.jsx(m,{style:{color:"white"},onClick:()=>u(d),children:e.jsx(S,{})})}}),a()}},z=async()=>{var o,c,l;try{const d={name:y,description:j},D=await T.updateDocumentStore(I,d);D.data&&(x({message:"Document Store Updated!",options:{key:new Date().getTime()+Math.random(),variant:"success",action:b=>e.jsx(m,{style:{color:"white"},onClick:()=>u(b),children:e.jsx(S,{})})}}),s(D.data.id))}catch(d){const D=((o=d.response)==null?void 0:o.data)||`${(c=d.response)==null?void 0:c.status}: ${(l=d.response)==null?void 0:l.statusText}`;x({message:`Failed to update Document Store: ${D}`,options:{key:new Date().getTime()+Math.random(),variant:"error",persist:!0,action:b=>e.jsx(m,{style:{color:"white"},onClick:()=>u(b),children:e.jsx(S,{})})}}),a()}},R=t?e.jsxs(O,{fullWidth:!0,maxWidth:"sm",open:t,onClose:a,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[e.jsx(W,{style:{fontSize:"1rem"},id:"alert-dialog-title",children:e.jsxs("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"},children:[e.jsx(F,{style:{marginRight:"10px"}}),r.title]})}),e.jsxs(V,{children:[e.jsxs(v,{sx:{p:2},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"row"},children:[e.jsxs(M,{children:["Name",e.jsx("span",{style:{color:"red"},children:"Â *"})]}),e.jsx("div",{style:{flexGrow:1}})]}),e.jsx(E,{size:"small",sx:{mt:1},type:"string",fullWidth:!0,onChange:o=>h(o.target.value),value:y??""},"documentStoreName")]}),e.jsxs(v,{sx:{p:2},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"row"},children:[e.jsx(M,{children:"Description"}),e.jsx("div",{style:{flexGrow:1}})]}),e.jsx(E,{size:"small",multiline:!0,rows:7,sx:{mt:1},type:"string",fullWidth:!0,onChange:o=>g(o.target.value),value:j??""},"documentStoreDesc")]})]}),e.jsxs(_,{children:[e.jsx(m,{onClick:()=>a(),children:"Cancel"}),e.jsx(K,{disabled:!y,variant:"contained",onClick:()=>C==="ADD"?N():z(),children:r.confirmButtonName})]}),e.jsx(X,{})]}):null;return q.createPortal(R,i)};Q.propTypes={show:f.bool,dialogProps:f.object,onCancel:f.func,onConfirm:f.func};export{Q as A,J as D,oe as I};
