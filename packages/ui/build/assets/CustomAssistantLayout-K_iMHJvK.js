import{P as x,x as M,y as P,r as o,z as $,H as b,j as s,D as V,q as G,ab as J,t as R,B as f,T as q,v as F,w as S,A as H,I as k,K as W,L as _,u as z,b as U,M as K,S as I,g as E,c as X}from"./index-ChaGAcYI.js";import{V as Y}from"./ViewHeader-B6DddmIg.js";import{I as Q}from"./ItemCard-Oz-nVzLi.js";import{A as Z}from"./assistant_empty-BAOmXGQM.js";import{S as O}from"./StyledButton-8-5Nm6DU.js";import{C as ss}from"./ConfirmDialog-UiX2DWMF.js";import{a as B}from"./assistants-Cf66v-4_.js";import{O as ts}from"./OutlinedInput-CAVpSyYT.js";import{v as es}from"./v4-CtRu48qb.js";import{E as as}from"./ErrorBoundary-CHfNOSqb.js";import{I as os,S as D}from"./IconPlus-DXcgeM4H.js";import"./StyledFab-cwi8e6Ef.js";import"./IconArrowLeft-Db9vzZ6o.js";import"./IconSearch-BD2fMQi-.js";import"./Grid-DFqYxbJF.js";import"./IconCopy-Si0QIoMO.js";const T=({show:i,dialogProps:e,onCancel:c,onConfirm:j})=>{const g=document.getElementById("portal"),r=M();P();const h=(...a)=>r(W(...a)),d=(...a)=>r(_(...a)),[u,y]=o.useState("");o.useEffect(()=>(r(i?{type:$}:{type:b}),()=>r({type:b})),[i,r]);const A=async()=>{var a;try{const n={details:JSON.stringify({name:u}),credential:es(),type:"CUSTOM"},m=await B.createNewAssistant(n);m.data&&(h({message:"New Custom Assistant created.",options:{key:new Date().getTime()+Math.random(),variant:"success",action:p=>s.jsx(S,{style:{color:"white"},onClick:()=>d(p),children:s.jsx(k,{})})}}),j(m.data.id))}catch(n){const m=typeof n=="string"?n:((a=n.response)==null?void 0:a.data)||`${n.response.data.message}`;h({message:`Failed to add new Custom Assistant: ${m}`,options:{key:new Date().getTime()+Math.random(),variant:"error",persist:!0,action:p=>s.jsx(S,{style:{color:"white"},onClick:()=>d(p),children:s.jsx(k,{})})}}),c()}},C=i?s.jsxs(V,{fullWidth:!0,maxWidth:"sm",open:i,onClose:c,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[s.jsx(G,{style:{fontSize:"1rem"},id:"alert-dialog-title",children:s.jsxs("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"},children:[s.jsx(J,{style:{marginRight:"10px"}}),e.title]})}),s.jsx(R,{children:s.jsxs(f,{sx:{p:2},children:[s.jsxs("div",{style:{display:"flex",flexDirection:"row"},children:[s.jsxs(q,{children:["Name",s.jsx("span",{style:{color:"red"},children:"Â *"})]}),s.jsx("div",{style:{flexGrow:1}})]}),s.jsx(ts,{size:"small",sx:{mt:1},type:"string",fullWidth:!0,onChange:a=>y(a.target.value),value:u??""},"customAssistantName")]})}),s.jsxs(F,{children:[s.jsx(S,{onClick:()=>c(),children:"Cancel"}),s.jsx(O,{disabled:!u,variant:"contained",onClick:()=>A(),children:e.confirmButtonName})]}),s.jsx(ss,{})]}):null;return H.createPortal(C,g)};T.propTypes={show:x.bool,dialogProps:x.object,onCancel:x.func,onConfirm:x.func};const Cs=()=>{var v;const i=z(),e=U(B.getAllAssistants),[c,j]=o.useState(!0),[g,r]=o.useState(null),[h,d]=o.useState(!1),[u,y]=o.useState({}),[A,C]=o.useState(""),a=t=>{C(t.target.value)},n=()=>{y({title:"Add New Custom Assistant",type:"ADD",cancelButtonName:"Cancel",confirmButtonName:"Add"}),d(!0)},m=t=>{d(!1),i(`/assistants/custom/${t}`)};function p(t){const l=JSON.parse(t.details);return l&&l.name&&l.name.toLowerCase().indexOf(A.toLowerCase())>-1}const L=t=>{const l=[];return t&&t.chatModel&&t.chatModel.name&&l.push(`${X}/api/v1/node-icon/${t.chatModel.name}`),l};return o.useEffect(()=>{e.request("CUSTOM")},[]),o.useEffect(()=>{j(e.loading)},[e.loading]),o.useEffect(()=>{e.error&&r(e.error)},[e.error]),s.jsxs(s.Fragment,{children:[s.jsx(K,{children:g?s.jsx(as,{error:g}):s.jsxs(I,{flexDirection:"column",sx:{gap:3},children:[s.jsx(Y,{isBackButton:!0,onSearchChange:a,search:!0,searchPlaceholder:"Search Assistants",title:"Custom Assistant",onBack:()=>i(-1),children:s.jsx(O,{variant:"contained",sx:{borderRadius:2,height:40},onClick:n,startIcon:s.jsx(os,{}),children:"Add"})}),c?s.jsxs(f,{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:E,children:[s.jsx(D,{variant:"rounded",height:160}),s.jsx(D,{variant:"rounded",height:160}),s.jsx(D,{variant:"rounded",height:160})]}):s.jsx(f,{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:E,children:e.data&&((v=e.data)==null?void 0:v.filter(p).map((t,l)=>{var N,w;return s.jsx(Q,{data:{name:(N=JSON.parse(t.details))==null?void 0:N.name,description:(w=JSON.parse(t.details))==null?void 0:w.instruction},images:L(JSON.parse(t.details)),onClick:()=>i("/assistants/custom/"+t.id)},l)}))}),!c&&(!e.data||e.data.length===0)&&s.jsxs(I,{sx:{alignItems:"center",justifyContent:"center"},flexDirection:"column",children:[s.jsx(f,{sx:{p:2,height:"auto"},children:s.jsx("img",{style:{objectFit:"cover",height:"20vh",width:"auto"},src:Z,alt:"AssistantEmptySVG"})}),s.jsx("div",{children:"No Custom Assistants Added Yet"})]})]})}),s.jsx(T,{show:h,dialogProps:u,onCancel:()=>d(!1),onConfirm:m,setError:r})]})};export{Cs as default};
